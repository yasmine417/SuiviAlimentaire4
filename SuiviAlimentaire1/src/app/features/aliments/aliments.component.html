<div class="min-h-screen bg-gradient-to-br from-rose-100 via-orange-50 to-amber-100">
  <!-- Navbar en haut -->
  <div class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50 border-b border-orange-100">
    <div class="max-w-7xl mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">

          <div>
            <h1 class="text-2xl font-bold bg-gradient-to-r from-orange-500 to-pink-500 bg-clip-text text-transparent">
              Gestion Aliments
            </h1>
            <p class="text-sm text-gray-500">Base nutritionnelle</p>
          </div>
        </div>
        <div class="flex gap-2">


        </div>
      </div>
    </div>
  </div>

  <!-- Contenu principal -->
  <div class="max-w-7xl mx-auto px-4 py-6 pb-24">
    <!-- Message d'erreur -->
    <div *ngIf="error" class="bg-red-50 border-l-4 border-red-400 text-red-700 px-4 py-3 rounded-lg mb-6 shadow-sm">
      {{ error }}
    </div>

    <!-- Barre de recherche -->
    <div class="mb-6">
      <div class="relative">
        <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400">ğŸ”</span>
        <input
          type="text"
          placeholder="Rechercher un aliment..."
          [(ngModel)]="searchTerm"
          (ngModelChange)="onSearchChange()"
          class="w-full pl-12 pr-4 py-4 bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg border-0 focus:ring-2 focus:ring-orange-400 text-base placeholder-gray-400"
        />
      </div>
    </div>

    <!-- Bouton ajouter -->
    <button
      (click)="toggleForm()"
      class="w-full mb-6 bg-gradient-to-r from-orange-500 via-orange-400 to-pink-400 hover:from-orange-600 hover:via-orange-500 hover:to-pink-500 text-white px-6 py-4 rounded-2xl flex items-center justify-center gap-3 shadow-xl transition transform hover:scale-[1.02] active:scale-[0.98]">
      <span class="text-xl">{{ showForm ? 'âŒ' : 'â•' }}</span>
      <span class="font-semibold text-lg">{{ showForm ? 'Annuler' : 'Ajouter un Aliment' }}</span>
    </button>

    <!-- Formulaire -->
    <div *ngIf="showForm" class="mb-6 bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl p-6 border border-orange-100">
      <h2 class="text-2xl font-bold mb-6 bg-gradient-to-r from-orange-500 to-pink-500 bg-clip-text text-transparent">
        {{ editingId ? 'Modifier aliment' : 'Nouvel aliment' }}
      </h2>
      <div class="space-y-5">
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Nom de l'aliment</label>
          <input
            type="text"
            [(ngModel)]="formData.nom"
            class="w-full px-4 py-3 bg-orange-50/50 border-2 border-orange-200 rounded-xl focus:border-orange-400 focus:ring-0 transition"
            placeholder="Ex: Pomme"
            required
          />
        </div>
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Calories par portion</label>
          <input
            type="number"
            step="0.01"
            [(ngModel)]="formData.caloriesParPortion"
            class="w-full px-4 py-3 bg-orange-50/50 border-2 border-orange-200 rounded-xl focus:border-orange-400 focus:ring-0 transition"
            placeholder="Ex: 95"
            required
          />
        </div>
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Nutriments par portion</label>
          <textarea
            [(ngModel)]="formData.nutrimentsParPortion"
            class="w-full px-4 py-3 bg-orange-50/50 border-2 border-orange-200 rounded-xl focus:border-orange-400 focus:ring-0 transition"
            placeholder="Ex: ProtÃ©ines: 0.5g, Glucides: 25g, Lipides: 0.3g"
            rows="3"
            required
          ></textarea>
        </div>
        <button
          (click)="handleSubmit()"
          class="w-full bg-gradient-to-r from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600 text-white px-6 py-4 rounded-xl flex items-center justify-center gap-2 transition shadow-lg font-semibold text-lg">
          <span>ğŸ’¾</span>
          {{ editingId ? 'Mettre Ã  jour' : 'Ajouter' }}
        </button>
      </div>
    </div>

    <!-- Loading -->
    <div *ngIf="loading" class="text-center py-20">
      <div class="inline-block animate-spin rounded-full h-16 w-16 border-4 border-orange-400 border-t-transparent"></div>
      <p class="mt-4 text-gray-600 font-medium">Chargement...</p>
    </div>

    <!-- Empty state -->
    <div *ngIf="!loading && filteredAliments.length === 0" class="text-center py-20 bg-white/70 backdrop-blur-sm rounded-3xl shadow-lg">
      <div class="text-7xl mb-4">ğŸ¥—</div>
      <p class="text-xl text-gray-600 font-medium">
        {{ searchTerm ? 'Aucun aliment trouvÃ©' : 'Aucun aliment disponible' }}
      </p>
    </div>

    <!-- Liste des aliments en grille -->
    <div *ngIf="!loading && filteredAliments.length > 0" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-5">
      <div *ngFor="let aliment of filteredAliments" class="bg-white/80 backdrop-blur-sm rounded-3xl shadow-lg hover:shadow-2xl transition-all transform hover:scale-105 overflow-hidden border border-orange-100">
        <div
          (click)="selectAliment(aliment)"
          class="h-44 bg-gradient-to-br from-orange-300 via-rose-300 to-pink-300 flex items-center justify-center cursor-pointer relative overflow-hidden group">
          <div class="text-7xl group-hover:scale-110 transition-transform duration-300">ğŸ½ï¸</div>
          <div class="absolute top-3 right-3 bg-white/90 backdrop-blur-sm rounded-full px-3 py-1.5 flex items-center gap-1 shadow-lg">
            <span class="text-orange-500 font-bold">ğŸ”¥</span>
            <span class="text-sm font-bold text-orange-600">{{ aliment.caloriesParPortion }}</span>
          </div>
        </div>
        <div class="p-4">
          <h3 class="text-base font-bold text-gray-800 mb-1 truncate">{{ aliment.nom }}</h3>
          <p class="text-xs text-gray-500 mb-3 line-clamp-2 h-8">{{ aliment.nutrimentsParPortion }}</p>
          <div class="flex gap-2">
            <button
              (click)="handleEdit(aliment)"
              class="flex-1 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-2 py-2.5 rounded-xl transition shadow-md text-sm font-medium"
              title="Modifier">
              âœï¸
            </button>
            <button
              (click)="handleDelete(aliment.id!)"
              class="flex-1 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-2 py-2.5 rounded-xl transition shadow-md text-sm font-medium"
              title="Supprimer">
              ğŸ—‘ï¸
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal dÃ©tails -->
    <div
      *ngIf="selectedAliment"
      (click)="closeModal()"
      class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
      <div
        (click)="$event.stopPropagation()"
        class="bg-white rounded-3xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl">
        <div class="h-72 bg-gradient-to-br from-orange-300 via-rose-300 to-pink-400 flex items-center justify-center relative">
          <div class="text-9xl">ğŸ¥—</div>
          <button
            (click)="closeModal()"
            class="absolute top-4 right-4 bg-white/90 backdrop-blur-sm rounded-full p-2 hover:bg-white transition shadow-lg">
            âŒ
          </button>
          <div class="absolute bottom-4 right-4 bg-white/90 backdrop-blur-sm rounded-full px-4 py-2 flex items-center gap-2 shadow-lg">
            <span class="text-2xl">ğŸ”¥</span>
            <span class="text-3xl font-bold text-orange-600">{{ selectedAliment.caloriesParPortion }}</span>
            <span class="text-sm text-gray-600">kcal</span>
          </div>
        </div>
        <div class="p-8">
          <h2 class="text-3xl font-bold bg-gradient-to-r from-orange-500 to-pink-500 bg-clip-text text-transparent mb-6">
            {{ selectedAliment.nom }}
          </h2>
          <div class="mb-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-3 flex items-center gap-2">
              <span>ğŸ“Š</span> Informations Nutritionnelles
            </h3>
            <div class="bg-gradient-to-br from-orange-50 to-pink-50 rounded-2xl p-5 border border-orange-200">
              <p class="text-gray-700 leading-relaxed">{{ selectedAliment.nutrimentsParPortion }}</p>
            </div>
          </div>
          <div class="flex gap-3">
            <button
              (click)="handleEdit(selectedAliment)"
              class="flex-1 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-6 py-4 rounded-xl flex items-center justify-center gap-2 transition shadow-lg font-semibold">
              <span>âœï¸</span>
              Modifier
            </button>
            <button
              (click)="handleDelete(selectedAliment.id!)"
              class="flex-1 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-6 py-4 rounded-xl flex items-center justify-center gap-2 transition shadow-lg font-semibold">
              <span>ğŸ—‘ï¸</span>
              Supprimer
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Barre de navigation en bas (Bottom Navigation) -->
  <!-- Barre de navigation en bas (Bottom Navigation) -->
  <div class="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-md border-t border-orange-100 shadow-2xl z-40">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex justify-around py-4">
        <!-- Accueil / Dashboard -->
        <a
          routerLink="/aliments"
          routerLinkActive="text-orange-500"
          [routerLinkActiveOptions]="{exact: false}"
          class="flex flex-col items-center gap-1 text-gray-400 hover:text-orange-500 transform hover:scale-110 transition cursor-pointer">
          <div class="p-2 hover:bg-orange-50 rounded-xl">
            <span class="text-2xl">ğŸ </span>
          </div>
          <span class="text-xs font-semibold">Accueil</span>
        </a>

        <!-- Historique des repas -->
        <a
          routerLink="/history"
          routerLinkActive="text-orange-500"
          class="flex flex-col items-center gap-1 text-gray-400 hover:text-orange-500 transform hover:scale-110 transition cursor-pointer">
          <div class="p-2 hover:bg-orange-50 rounded-xl">
            <span class="text-2xl">ğŸ“Š</span>
          </div>
          <span class="text-xs font-semibold">Historique</span>
        </a>

        <!-- Scanner un repas (OCR) -->
        <a
          routerLink="/ocr"
          routerLinkActive="text-orange-500"
          class="flex flex-col items-center gap-1 text-gray-400 hover:text-orange-500 transform hover:scale-110 transition cursor-pointer">
          <div class="p-2 hover:bg-orange-50 rounded-xl">
            <span class="text-2xl">ğŸ“¸</span>
          </div>
          <span class="text-xs font-semibold">Scanner</span>
        </a>

        <!-- Profil -->
        <a
          routerLink="/profile"
          routerLinkActive="text-orange-500"
          class="flex flex-col items-center gap-1 text-gray-400 hover:text-orange-500 transform hover:scale-110 transition cursor-pointer">
          <div class="p-2 hover:bg-orange-50 rounded-xl">
            <span class="text-2xl">ğŸ‘¤</span>
          </div>
          <span class="text-xs font-semibold">Profil</span>
        </a>
      </div>
    </div>
  </div>
</div>
